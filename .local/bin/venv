#!/bin/bash

# Python venv wrapper

VENV_DIR=".venv"

case "$1" in
  mk)
    python -m venv "$VENV_DIR"
    ;;
  act)
    source "$VENV_DIR/bin/activate"
    ;;
  rst)
    rm -rf "$VENV_DIR"
    python -m venv "$VENV_DIR"
    source "$VENV_DIR/bin/activate"
    if [ -f requirements.txt ]; then
      pip install -r requirements.txt
    fi
    ;;
  rm)
    rm -rf "$VENV_DIR"
    ;;
  "")
    if [ -d "$VENV_DIR" ]; then
      echo "Venv exists at $VENV_DIR"
    else
      echo "No venv found"
    fi
    ;;
  *)
    echo "Usage: venv [mk|act|rst|rm]"
    echo "  venv         - check if venv exists"
    echo "  venv mk      - create new venv"
    echo "  venv act     - activate venv"
    echo "  venv rst     - reset venv and install from requirements.txt"
    echo "  venv rm      - remove venv"
    exit 1
    ;;
esac
