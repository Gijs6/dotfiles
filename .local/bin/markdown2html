#!/usr/bin/env python3
import argparse
import markdown
from pathlib import Path

def md_to_html(md_text: str) -> str:
    return markdown.markdown(
        md_text,
        extensions=[
            "extra",
            "codehilite",
            "tables",
            "fenced_code",
            "toc",
            "sane_lists",
            "nl2br",
            "admonition"
        ]
    )

def main():
    parser = argparse.ArgumentParser(
        description="Convert Markdown to HTML with common extensions."
    )
    parser.add_argument("input", help="Path to input Markdown file")
    parser.add_argument(
        "-o", "--output",
        default="output.html",
        help="Path to output HTML file (default: output.html)"
    )
    args = parser.parse_args()

    input_path = Path(args.input)
    output_path = Path(args.output)

    with input_path.open("r", encoding="utf-8") as f:
        md_text = f.read()

    html = md_to_html(md_text)

    with output_path.open("w", encoding="utf-8") as f:
        f.write(html)

if __name__ == "__main__":
    main()
